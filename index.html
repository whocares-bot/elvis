<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Soul King's 24 - Ultimate Edition</title>
    <style>
        :root {
            --bg-deep: #1a0521;
            --parchment: #f2e2ba;
            --gold-trim: #c5a044;
            --gold-dark: #8e6d2a;
            --btn-num-bg: #fdfcf8;
            --btn-num-shadow: #d1c9b8;
            --btn-face-bg: #3d1b5d;
            --btn-face-text: #ffd700;
            --btn-face-shadow: #250a36;
            --btn-red: #cc3333;
            --btn-red-shadow: #881111;
            --btn-green: #2e7d32;
            --btn-green-shadow: #144418;
        }

        body {
            font-family: 'Segoe UI', 'Roboto', 'å¾®è»Ÿæ­£é»‘é«”', sans-serif;
            background-color: var(--bg-deep);
            /* æ¨¡æ“¬èƒŒæ™¯çš„æ·±ç´«è‰²èˆªæµ·åœ–ç´‹ç† */
            background-image: radial-gradient(circle at center, #2e0d3d 0%, var(--bg-deep) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
            box-sizing: border-box;
            touch-action: manipulation;
        }

        /* ç¾Šçš®ç´™ä¸»å®¹å™¨ */
        .container {
            background-color: var(--parchment);
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
            width: 100%;
            max-width: 380px;
            padding: 20px;
            border-radius: 15px;
            border: 5px solid var(--gold-trim);
            box-shadow: 
                0 20px 40px rgba(0,0,0,0.8),
                inset 0 0 15px rgba(0,0,0,0.1);
            position: relative;
            box-sizing: border-box;
        }

        h2 {
            margin: 0 0 15px 0;
            color: #2c1a05;
            font-size: 26px;
            letter-spacing: 1px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: 900;
        }

        /* é¡¯ç¤ºæ’æ§½å€åŸŸ */
        .display-area {
            background-color: rgba(0,0,0,0.08);
            border-radius: 12px;
            padding: 10px;
            margin-bottom: 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.2);
        }

        .card-slot {
            height: 80px;
            background-color: rgba(0,0,0,0.05);
            border-radius: 8px;
            border: 1px solid rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 32px;
            font-weight: bold;
            transition: all 0.2s;
        }

        /* å¡«æ»¿å¾Œçš„å¡ç‰‡æ•ˆæœ */
        .card-slot.filled {
            background: linear-gradient(135deg, var(--btn-face-bg), #2a0e3d);
            color: var(--btn-face-text);
            border: 2px solid var(--gold-trim);
            box-shadow: 0 4px 8px rgba(0,0,0,0.4);
            transform: translateY(-2px);
        }

        /* æŒ‰éˆ•ç¶²æ ¼ */
        .keypad-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }

        /* é€šç”¨æŒ‰éˆ•åŸºç¤ (3D æ•ˆæœ) */
        .btn {
            height: 55px;
            border: none;
            border-radius: 10px;
            font-size: 22px;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            transition: all 0.05s;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* æŒ‰éˆ•åšåº¦èˆ‡é™°å½± */
        .btn.num {
            background: var(--btn-num-bg);
            color: #332211;
            box-shadow: 0 5px 0 var(--btn-num-shadow), 0 8px 10px rgba(0,0,0,0.2);
        }

        .btn.face {
            background: var(--btn-face-bg);
            color: var(--btn-face-text);
            box-shadow: 0 5px 0 var(--btn-face-shadow), 0 8px 10px rgba(0,0,0,0.3);
            font-size: 24px;
        }

        .btn.clear {
            background: var(--btn-red);
            color: white;
            box-shadow: 0 5px 0 var(--btn-red-shadow), 0 8px 10px rgba(0,0,0,0.2);
            grid-column: span 2;
        }

        .btn.rock {
            background: var(--btn-green);
            color: white;
            box-shadow: 0 5px 0 var(--btn-green-shadow), 0 8px 10px rgba(0,0,0,0.2);
            grid-column: span 2;
            font-size: 22px;
        }

        /* æŒ‰ä¸‹æŒ‰éˆ•çš„ä½ç§» */
        .btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 var(--btn-num-shadow), 0 2px 5px rgba(0,0,0,0.2);
        }
        .btn.face:active { box-shadow: 0 2px 0 var(--btn-face-shadow); }
        .btn.clear:active { box-shadow: 0 2px 0 var(--btn-red-shadow); }
        .btn.rock:active { box-shadow: 0 2px 0 var(--btn-green-shadow); }

        /* çµæœå€ */
        #results {
            margin-top: 15px;
            width: 100%;
        }
        .sol-item {
            background: rgba(255,255,255,0.5);
            margin: 5px 0;
            padding: 8px;
            border-radius: 5px;
            font-family: monospace;
            font-weight: bold;
            border-left: 4px solid var(--gold-trim);
        }
    </style>
</head>
<body>

<div class="container">
    <h2>â˜ ï¸ SOUL KING 24 â˜ ï¸</h2>
    
    <div class="display-area" id="displayArea">
        <div class="card-slot" id="slot-0"></div>
        <div class="card-slot" id="slot-1"></div>
        <div class="card-slot" id="slot-2"></div>
        <div class="card-slot" id="slot-3"></div>
    </div>

    <div class="keypad-grid">
        <button class="btn num" onclick="addCard('2')">2</button>
        <button class="btn num" onclick="addCard('3')">3</button>
        <button class="btn num" onclick="addCard('4')">4</button>
        <button class="btn num" onclick="addCard('5')">5</button>
        
        <button class="btn num" onclick="addCard('6')">6</button>
        <button class="btn num" onclick="addCard('7')">7</button>
        <button class="btn num" onclick="addCard('8')">8</button>
        <button class="btn num" onclick="addCard('9')">9</button>
        
        <button class="btn num" style="grid-column: span 4;" onclick="addCard('10')">10</button>

        <button class="btn face" onclick="addCard('A')">A</button>
        <button class="btn face" onclick="addCard('J')">J</button>
        <button class="btn face" onclick="addCard('Q')">Q</button>
        <button class="btn face" onclick="addCard('K')">K</button>
        
        <button class="btn clear" onclick="resetAll()">CLEAR</button>
        <button class="btn rock" onclick="runSolve()">ROCK!</button>
    </div>

    <div id="results"></div>
</div>

<script>
    let selected = [];
    const valMap = {'A':1, '2':2, '3':3, '4':4, '5':5, '6':6, '7':7, '8':8, '9':9, '10':10, 'J':11, 'Q':12, 'K':13};

    function addCard(c) {
        if (selected.length < 4) {
            selected.push(c);
            updateUI();
        }
    }

    function resetAll() {
        selected = [];
        updateUI();
        document.getElementById('results').innerHTML = "";
    }

    function updateUI() {
        for (let i = 0; i < 4; i++) {
            const slot = document.getElementById(`slot-${i}`);
            if (selected[i]) {
                slot.innerText = selected[i];
                slot.classList.add('filled');
            } else {
                slot.innerText = "";
                slot.classList.remove('filled');
            }
        }
    }

    function runSolve() {
        if (selected.length !== 4) return;
        const nums = selected.map(c => valMap[c]);
        const results = new Set();

        const find = (ns, es) => {
            if (ns.length === 1) {
                if (Math.abs(ns[0] - 24) < 0.001) results.add(es[0]);
                return;
            }
            for (let i = 0; i < ns.length; i++) {
                for (let j = 0; j < ns.length; j++) {
                    if (i === j) continue;
                    const nextN = ns.filter((_, k) => k !== i && k !== j);
                    const nextE = es.filter((_, k) => k !== i && k !== j);
                    const a = ns[i], b = ns[j], ea = es[i], eb = es[j];
                    find([...nextN, a+b], [...nextE, `(${ea}+${eb})`]);
                    find([...nextN, a-b], [...nextE, `(${ea}-${eb})`]);
                    find([...nextN, a*b], [...nextE, `(${ea}*${eb})`]);
                    if (Math.abs(b) > 0.001) find([...nextN, a/b], [...nextE, `(${ea}/${eb})`]);
                }
            }
        };

        find(nums, nums.map(String));
        const out = document.getElementById('results');
        out.innerHTML = results.size === 0 ? "ğŸ’€ NO SOLUTION" : "";
        results.forEach(s => {
            const d = document.createElement('div');
            d.className = 'sol-item';
            d.innerText = s.substring(1, s.length-1) + " = 24";
            out.appendChild(d);
        });
    }
</script>

</body>
</html>

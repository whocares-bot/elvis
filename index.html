<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>撲克牌 24 點計算器</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; background-color: #f0f2f5; }
        .container { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h2 { text-align: center; color: #1a73e8; }
        .input-group { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 20px; }
        input { padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; text-align: center; }
        button { width: 100%; padding: 12px; background-color: #1a73e8; color: white; border: none; border-radius: 8px; font-size: 18px; cursor: pointer; }
        button:hover { background-color: #1557b0; }
        #results { margin-top: 20px; width: 100%; }
        .solution { background: #e8f0fe; padding: 10px; margin-bottom: 5px; border-radius: 5px; font-family: monospace; }
        .no-solution { color: #d93025; text-align: center; }
    </style>
</head>
<body>

<div class="container">
    <h2>24 點計算器</h2>
    <p style="font-size: 14px; color: #666;">請輸入四張牌的點數 (A=1, J=11, Q=12, K=13)</p>
    <div class="input-group">
        <input type="number" id="n1" placeholder="第 1 張" min="1" max="13">
        <input type="number" id="n2" placeholder="第 2 張" min="1" max="13">
        <input type="number" id="n3" placeholder="第 3 張" min="1" max="13">
        <input type="number" id="n4" placeholder="第 4 張" min="1" max="13">
    </div>
    <button onclick="solve()">開始計算</button>
    <div id="results"></div>
</div>

<script>
function solve() {
    const nums = [
        parseFloat(document.getElementById('n1').value),
        parseFloat(document.getElementById('n2').value),
        parseFloat(document.getElementById('n3').value),
        parseFloat(document.getElementById('n4').value)
    ];
    
    if (nums.some(isNaN)) {
        alert("請輸入完整的四個數字");
        return;
    }

    const solutions = new Set();
    const find24 = (currentNums, currentExprs) => {
        if (currentNums.length === 1) {
            if (Math.abs(currentNums[0] - 24) < 0.001) {
                solutions.add(currentExprs[0]);
            }
            return;
        }

        for (let i = 0; i < currentNums.length; i++) {
            for (let j = 0; j < currentNums.length; j++) {
                if (i === j) continue;

                const nextNums = currentNums.filter((_, idx) => idx !== i && idx !== j);
                const nextExprs = currentExprs.filter((_, idx) => idx !== i && idx !== j);

                const a = currentNums[i], b = currentNums[j];
                const ea = currentExprs[i], eb = currentExprs[j];

                // 加法
                find24([...nextNums, a + b], [...nextExprs, `(${ea}+${eb})`]);
                // 乘法
                find24([...nextNums, a * b], [...nextExprs, `(${ea}*${eb})`]);
                // 減法
                find24([...nextNums, a - b], [...nextExprs, `(${ea}-${eb})`]);
                // 除法
                if (Math.abs(b) > 0.0001) {
                    find24([...nextNums, a / b], [...nextExprs, `(${ea}/${eb})`]);
                }
            }
        }
    };

    find24(nums, nums.map(String));

    const resultDiv = document.getElementById('results');
    resultDiv.innerHTML = "";
    
    if (solutions.size === 0) {
        resultDiv.innerHTML = "<p class='no-solution'>無解 (無法組合成 24)</p>";
    } else {
        solutions.forEach(sol => {
            const item = document.createElement('div');
            item.className = 'solution';
            item.innerText = sol.substring(1, sol.length - 1) + " = 24";
            resultDiv.appendChild(item);
        });
    }
}
</script>

</body>
</html>